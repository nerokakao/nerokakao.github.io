<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Nerokakao.GitHub.io/blogs/spray-can.html by nerokakao</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Nerokakao.GitHub.io/blogs/spray-can.html</h1>
      <h2 class="project-tagline">my github blog/ another: tskshy</h2>
    </section>

    <section class="main-content">
      <h3>
<a id="目录结构" class="anchor" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>目录结构</h3>

<blockquote>
<p>root/
build.sbt</p>

<ul>
<li>src/
++ main/
+++ scala/
++++ SprayCan.scala</li>
</ul>
</blockquote>

<h3>
<a id="detail" class="anchor" href="#detail" aria-hidden="true"><span class="octicon octicon-link"></span></a>detail:</h3>

<p>SprayCan.scala</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">import</span> <span class="pl-v">akka.actor.</span>{<span class="pl-v">Props</span>, <span class="pl-v">ActorSystem</span>, <span class="pl-v">Actor</span>}
<span class="pl-k">import</span> <span class="pl-v">akka.io.</span><span class="pl-v">IO</span>
<span class="pl-k">import</span> <span class="pl-v">akka.util.</span><span class="pl-v">Timeout</span>
<span class="pl-k">import</span> <span class="pl-v">akka.pattern.</span><span class="pl-v">ask</span>
<span class="pl-k">import</span> <span class="pl-v">spray.can.</span><span class="pl-v">Http</span>
<span class="pl-k">import</span> <span class="pl-v">spray.routing.</span><span class="pl-v">HttpService</span>
<span class="pl-k">import</span> <span class="pl-v">spray.http.MediaTypes.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">scala.concurrent.duration.</span><span class="pl-v">_</span>

<span class="pl-k">object</span> <span class="pl-en">SprayCan</span> <span class="pl-k">extends</span> <span class="pl-e">App</span> {
    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">system</span> <span class="pl-k">=</span> <span class="pl-en">ActorSystem</span>(<span class="pl-s"><span class="pl-pds">"</span>spray-can<span class="pl-pds">"</span></span>)
    <span class="pl-k">val</span> <span class="pl-en">service</span> <span class="pl-k">=</span> system.actorOf(<span class="pl-en">Props</span>[<span class="pl-en">ServicesActor</span>], name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>service<span class="pl-pds">"</span></span>)

    <span class="pl-k">implicit</span> <span class="pl-k">val</span> <span class="pl-en">timeout</span> <span class="pl-k">=</span> <span class="pl-en">Timeout</span>(<span class="pl-c1">5.</span>seconds)
    <span class="pl-en">IO</span>(<span class="pl-en">Http</span>) <span class="pl-k">?</span> <span class="pl-en">Http</span>.<span class="pl-en">Bind</span>(service, interface <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, port <span class="pl-k">=</span> <span class="pl-c1">4242</span>)
}

<span class="pl-k">class</span> <span class="pl-en">ServicesActor</span> <span class="pl-k">extends</span> <span class="pl-e">Actor</span> <span class="pl-k">with</span> <span class="pl-e">Services</span> {
    <span class="pl-k">def</span> <span class="pl-en">actorRefFactory</span> <span class="pl-k">=</span> context
    <span class="pl-k">def</span> <span class="pl-en">receive</span> <span class="pl-k">=</span> runRoute(routes)
}


<span class="pl-k">trait</span> <span class="pl-en">Services</span> <span class="pl-k">extends</span> <span class="pl-e">HttpService</span> {
    <span class="pl-k">val</span> <span class="pl-en">routes</span> <span class="pl-k">=</span>
    path(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) {
        get {
            respondWithMediaType(`text<span class="pl-k">/</span>html`) {
                complete {
                    &lt;<span class="pl-ent">html</span>&gt;
                        &lt;<span class="pl-ent">body</span>&gt;
                            <span class="pl-c1">1234</span>
                        &lt;/<span class="pl-ent">body</span>&gt;
                    &lt;/<span class="pl-ent">html</span>&gt;
                }
            }
        }
    }
}
</pre></div>

<p>build.sbt</p>

<pre><code>name := "2"

version := "1.0"

scalaVersion := "2.11.6"

scalacOptions := Seq("-unchecked", "-deprecation", "-encoding", "utf8")

libraryDependencies ++= { Seq(
"io.spray"      %% "spray-can"          % "1.3.3",
"io.spray"      %% "spray-routing"      % "1.3.3",
"com.typesafe.akka" %% "akka-actor"         % "2.3.9"
)}

</code></pre>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

