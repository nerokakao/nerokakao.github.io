{"name":"Nerokakao.GitHub.io/blogs/spray-can.html","tagline":"my github blog/ another: tskshy","body":"### 目录结构\r\n> root/\r\n> build.sbt\r\n> + src/\r\n> ++ main/\r\n> +++ scala/\r\n> ++++ SprayCan.scala\r\n\r\n### detail: \r\n\r\nSprayCan.scala\r\n```scala\r\nimport akka.actor.{Props, ActorSystem, Actor}\r\nimport akka.io.IO\r\nimport akka.util.Timeout\r\nimport akka.pattern.ask\r\nimport spray.can.Http\r\nimport spray.routing.HttpService\r\nimport spray.http.MediaTypes._\r\nimport scala.concurrent.duration._\r\n\r\nobject SprayCan extends App {\r\n\timplicit val system = ActorSystem(\"spray-can\")\r\n\tval service = system.actorOf(Props[ServicesActor], name = \"service\")\r\n\r\n\timplicit val timeout = Timeout(5.seconds)\r\n\tIO(Http) ? Http.Bind(service, interface = \"127.0.0.1\", port = 4242)\r\n}\r\n\r\nclass ServicesActor extends Actor with Services {\r\n\tdef actorRefFactory = context\r\n\tdef receive = runRoute(routes)\r\n}\r\n\r\n\r\ntrait Services extends HttpService {\r\n\tval routes =\r\n\tpath(\"\") {\r\n\t\tget {\r\n\t\t\trespondWithMediaType(`text/html`) {\r\n\t\t\t\tcomplete {\r\n\t\t\t\t\t<html>\r\n\t\t\t\t\t\t<body>\r\n\t\t\t\t\t\t\t1234\r\n\t\t\t\t\t\t</body>\r\n\t\t\t\t\t</html>\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nbuild.sbt\r\n```\r\nname := \"2\"\r\n\r\nversion := \"1.0\"\r\n\r\nscalaVersion := \"2.11.6\"\r\n\r\nscalacOptions := Seq(\"-unchecked\", \"-deprecation\", \"-encoding\", \"utf8\")\r\n\r\nlibraryDependencies ++= { Seq(\r\n\"io.spray\"\t\t%% \"spray-can\"\t\t\t% \"1.3.3\",\r\n\"io.spray\"\t\t%% \"spray-routing\"\t\t% \"1.3.3\",\r\n\"com.typesafe.akka\"\t%% \"akka-actor\"\t\t\t% \"2.3.9\"\r\n)}\r\n\r\n```\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}